<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style/versionA.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <title>Mochileros Sin Fronteras</title>
</head>
<body>
<section id="Inicio">
    <nav id="Navegacion">
        <div class="website-name">Mochileros Sin Fronteras</div>
        <a href="#">Inicio</a>
        <a href="#">Experiencias</a>
        <a href="#">Consejos</a>
        <a href="#">Foro</a>
        <a href="#">Contacto</a>
        <div class="top-right">
            <img style= "width:auto; height: 3.3vw; padding-right: 1vw;" src="images/logo.png" alt="logo" />
        </div>
        <label for="lang" ></label>
        <select class="menu-lang" name="lang" id="lang">
            <option value="ES">ES</option>
            <option value="ENG">ENG</option>
            <option value="UA">UA</option>
            <option value="FR">FR</option>
        </select>
    </nav>
    <div class="forma">
        <div class="forma-header">Registro de nuevos usuarios</div>
        <form id="NewCardForm">
            <div class="forma-left">
                <label class="forma-text" for="name"></label>
                <input type="text" id="name" name="name" placeholder="Nombre">
                <label class="forma-text" for="email"></label>
                <input type="text" id="email" name="email" placeholder="Correo electronico">
                <label class="forma-text" for="bday">Fecha de nacimiento</label>
                <input type="date" id="bday">
                <label class="forma-text" for="login"></label>
                <input type="text" id="login" name="login" placeholder="login">
                <label class="forma-text" for="file">Subir imagen de perfil</label>
                <input type="file" id="file" name="filename">
                <button type="button" id="button-submit-image">Examinar ...</button>
                <div class="consent-box">
                    <input type="checkbox" id="consent" name="consent" value="Consented">
                    <label for="consent">Acepto la
                        <a href="#">Politica de privacidad</a>
                    </label><br>
                </div>
            </div>
            <div class="forma-right">
                <label class="forma-text" for="surname"></label>
                <input type="text" id="surname" name="surname" placeholder="Apellidos">
                <label class="forma-text" for="confirmEmail"></label>
                <input type="text" id="confirmEmail" name="confirmEmail" placeholder="Confirmar correo">
                <label class="forma-text" for="password"></label>
                <input type="text" id="password" name="password" placeholder="password">
                <div class="forma-submit">
                    <input type="submit" value="Guardar datos y acceder">
                </div>
            </div>
        </form>
    </div>
</section>
<!--#TODO to change footer-->
<footer>
    <a href="https://es.vecteezy.com/fotos-gratis/fondo-de-navidad" class="footerLink">Fondo De Navidad Fotos de Stock
        por Vecteezy</a>
    <a href="https://iconos8.es/license" class="footerLink">Iconos por ICONS8</a>
    <div id="footerImages">
        <a href="https://www.youtube.com/watch?v=w0HxMhXSgXo">
            <img src="images/icons8-bebe-yoda-100.png" alt="bebe yoda">
        </a>
        <a href="https://www.lego.com/">
            <img src="images/icons8-lego-128.png" alt="lego">
        </a>
        <a href="https://www.instagram.com/starwars/">
            <img src="images/icons8-instagram-128.png" alt="instagram">
        </a>
    </div>
</footer>
<script src="script/class.js"></script>
<script src="script/local_storage_ops.js"></script>
<script src="script/script.js"></script>
<script src="script/init.js"></script>
<script src="script/games.js"></script>
<script src="script/countdown.js"></script>

<!-- ============================================================
     VÍNCULO A VERSIÓN B + almacenamiento local (simulado)
     - Al enviar el formulario:
       1) Guardamos el nombre y, si hay archivo, la imagen en localStorage
       2) Redirigimos a versionB.html
     - La Versión B leerá estos valores y mostrará la tarjeta de perfil
   ============================================================ -->
<script>
    (function () {
        const form   = document.getElementById('NewCardForm');
        const nameEl = document.getElementById('name');
        const loginEl = document.getElementById('login');
        const fileEl = document.getElementById('file');

        if (!form) return;

        form.addEventListener('submit', function (e) {
            e.preventDefault(); // no enviamos a servidor; simulamos alta

            // 1) Guardar nombre (o login si no hay nombre)
            const name = (nameEl.value || loginEl.value || 'Usuario').trim();
            try {
                localStorage.setItem('userName', name);
                // Duplicamos en 'name' por compatibilidad con tu Versión B
                localStorage.setItem('name', name);
            } catch (_) {}

            // 2) Guardar avatar si el usuario sube una imagen (como DataURL)
            const file = fileEl.files && fileEl.files[0];
            const goToVersionB = () => { window.location.href = 'versionB.html'; };

            if (file) {
                const reader = new FileReader();
                reader.onload = function (ev) {
                    try { localStorage.setItem('userAvatar', ev.target.result); } catch (_) {}
                    goToVersionB();
                };
                reader.readAsDataURL(file);
            } else {
                // Sin imagen: Version B usará un avatar por defecto
                try { localStorage.removeItem('userAvatar'); } catch (_) {}
                goToVersionB();
            }
        });
    })();
</script>
</body>
</html>